monitor=DP-2,3840x2160@60,auto,2,bitdepth,10,transform,2
#monitor=test,3120x1440@120,auto,auto,bitdepth,10,cm, hdr, sdrbrightness, 1.0, sdrsaturation, 0
monitor=DP-1,3840x2160@240,auto,auto,bitdepth,10,vrr,2

#ENABLE_HDR_WSI=1 gamescope --fullscreen -w 2560 -h 1440 -r 240 --hdr-enabled --hdr-debug-force-output --hdr-sdr-content-nits 600 --mangoapp -- env ENABLE_GAMESCOPE_WSI=1 DXVK_HDR=1 DISABLE_HDR_WSI=1 :

workspace = 1, monitor:DP-1
workspace = 2, monitor:DP-1
workspace = 3, monitor:DP-1
workspace = 4, monitor:DP-1
workspace = 5, monitor:DP-1
workspace = 11, monitor:DP-2
workspace = 12, monitor:DP-2
workspace = 13, monitor:DP-1

experimental {
}

render {
    cm_fs_passthrough = 1
    cm_auto_hdr = 1
    cm_enabled = true
    direct_scanout = 1
}

# unscale XWayland
xwayland {
    force_zero_scaling = true
}

# toolkit-specific scale
env = GDK_SCALE,2
env = XCURSOR_SIZE,128
env = HYPRCURSOR_THEME,MyCursor
env = HYPRCURSOR_SIZE,128

###################
### MY PROGRAMS ###
###################

$terminal = foot
$fileManager = dolphin
$menu = rofi -show drun -theme blush


#################
### AUTOSTART ###
#################

exec-once = sunshine 
#exec-once = hyprpm reload -n
exec-once = [workspace 2 silent] foot -e nvim
exec-once = [workspace 1 silent] foot -e bash -c "fastfetch && zsh"
exec-once = [workspace 3 silent] zen-browser 
exec-once = sleep 0.1 && hyprctl dispatch workspace 3 && hyprctl dispatch workspace 11 && hyprctl dispatch workspace 1
exec-once = hyprpaper 
exec-once = systemctl --user start plasma-polkit-agent

#############################
### ENVIRONMENT VARIABLES ###
#############################

#####################
### LOOK AND FEEL ###
#####################

general { 
    gaps_in = 0
        gaps_out = 0

        border_size = 1
        col.active_border = rgba(FFFFFF22)
        col.inactive_border = rgba(FFFFFF10)

# Set to true enable resizing windows by clicking and dragging on borders and gaps
        resize_on_border = false 

# Please see https://wiki.hyprland.org/Configuring/Tearing/ before you turn this on
        allow_tearing = true

        layout = dwindle
}

windowrule = match:class cyberpunk2077.exe, immediate yes

# https://wiki.hyprland.org/Configuring/Variables/#decoration
decoration {
    rounding = 0

# Change transparency of focused and unfocused windows
        active_opacity = 1.0
        inactive_opacity = 0.94

# https://wiki.hyprland.org/Configuring/Variables/#blur
        blur {
            enabled = true
                size = 3
                passes = 1

                vibrancy = 0.1696
        }
}

# https://wiki.hyprland.org/Configuring/Variables/#animations
animations {
    enabled = false

# Default animations, see https://wiki.hyprland.org/Configuring/Animations/ for more

        bezier = myBezier, 0.05, 0.9, 0.1, 1.05

        animation = windows, 1, 7, myBezier
        animation = windowsOut, 1, 7, default, popin 80%
        animation = border, 1, 10, default
        animation = borderangle, 1, 8, default
        animation = fade, 1, 7, default
        animation = workspaces, 1, 6, default
}

# See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
dwindle {
    pseudotile = true # Master switch for pseudotiling. Enabling is bound to mainMod + P in the keybinds section below
        preserve_split = true # You probably want this
}

# See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
#master {
#    new_is_master = true
#}

# https://wiki.hyprland.org/Configuring/Variables/#misc
misc { 
    force_default_wallpaper = 0 # Set to 0 or 1 to disable the anime mascot wallpapers
        disable_hyprland_logo = true # If true disables the random hyprland logo / anime girl background. :(
                }


#############
### INPUT ###
#############

# https://wiki.hyprland.org/Configuring/Variables/#input
                input {
                kb_layout = us
                kb_variant =
                kb_model =
                kb_options =
                kb_rules =

                follow_mouse = 1

                sensitivity = 0 # -1.0 - 1.0, 0 means no modification.

                force_no_accel = true

                touchpad {
                    natural_scroll = true
                }
                }

# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#per-device-input-configs for more
device {
    name = epic-mouse-v1
        sensitivity = -0.5

}


####################
### KEYBINDINGSS ###
####################

# See https://wiki.hyprland.org/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

# Example binds, see https://wiki.hyprland.org/Configuring/Binds/ for more
bind = $mainMod, C, killactive,
     bind = $mainMod SHIFT, C, forcekillactive,
#bind = $mainMod, M, exit,
#bind = $mainMod, E, exec, $fileManager
     bind = $mainMod, V, togglefloating,
     bind = $mainMod, A, exec, $menu
#bind = $mainMod, P, pseudo, # dwindle
     bind = $mainMod SHIFT, J, togglesplit, # dwindle
#bind = $mainMod, Y, exec, python /home/zeptic/rofi-lutris/rofi-lutris
     bind = CTRL ALT, S, exec, sh /home/zeptic/zeptittyconf/vimAnywhere-hyprland/copyToClipboardHook.sh
     bind = CTRL ALT, V, exec, sh /home/zeptic/zeptittyconf/vimAnywhere-hyprland/run.sh

#bind = CTRL ALT, W, exec, [workspace 5] foot --hold -e zsh "/home/zeptic/zeptittyconf/vfio-zeptic-dynamic/manualHooks/vfio-hyprland.sh"

# Move focus with mainMod + arrow keys
     bind = $mainMod, O, movefocus, l
     bind = $mainMod, L, movefocus, r
     bind = $mainMod, I, movefocus, u
     bind = $mainMod, K, movefocus, d

     bind = SUPER SHIFT, O, movewindow, l
     bind = SUPER SHIFT, L, movewindow, r
     bind = SUPER SHIFT, I, movewindow, u
     bind = SUPER SHIFT, K, movewindow, d 

     bind = $mainMod SHIFT CTRL, L, resizeactive, 50 0
     bind = $mainMod SHIFT CTRL, O, resizeactive, -50 0
     bind = $mainMod SHIFT CTRL, I, resizeactive, 0 -50
     bind = $mainMod SHIFT CTRL, K, resizeactive, 0 50

# Switch workspaces with mainMod + [0-9]
     bind = $mainMod, S, workspace, 1
     bind = $mainMod, D, workspace, 2
     bind = $mainMod, F, workspace, 3
     bind = $mainMod, G, workspace, 4
     bind = $mainMod, W, workspace, 11
     bind = $mainMod, E, workspace, 12
     bind = $mainMod, R, workspace, 13

# Move active window to a workspace with mainMod + SHIFT + [0-9]
     bind = $mainMod SHIFT, S, movetoworkspacesilent, 1
     bind = $mainMod SHIFT, D, movetoworkspacesilent, 2
     bind = $mainMod SHIFT, F, movetoworkspacesilent, 3
     bind = $mainMod SHIFT, G, movetoworkspacesilent, 4
#bind = $mainMod SHIFT, O, movetoworkspacesilent, 5
     bind = $mainMod SHIFT, W, movetoworkspacesilent, 11
     bind = $mainMod SHIFT, E, movetoworkspacesilent, 12
     bind = $mainMod SHIFT, R, movetoworkspacesilent, 13

     bind = $mainMod, T, exec, grim -g "$(slurp -d)" - | wl-copy
     bind = $mainMod SHIFT, T, exec, grim -g "$(slurp)" - | convert - -resize 300% - | tesseract - - | wl-copy
     bind = $mainMod, X, fullscreen 
     bind = $mainMod, Z, fullscreenstate, 2 0 
     bind = $mainMod, B, fullscreenstate, 0 2 

     bind = $mainMod, Q, exec, $terminal
     bind = $mainMod, M, exec, [workspace 4] rofi -modi games -show games -theme games
     bind = $mainMod, N, exec, [workspace 11] foot -e sh steam
     bind = $mainMod, P, exec, [workspace 13] missioncenter  
     bind = $mainMod, I, exec, [workspace 13] easyeffects  
     bind = $mainMod, O, exec, [workspace 13] pavucontrol  

#bind = $mainMod, O, exec, [workspace 11] foot -e sudo /home/zeptic/zeptittyconf/.dotfiles/.desktopScripts/autoStartWinVM.sh 
     bind = $mainMod SHIFT, A, pin
#change this to without shift

# Example special workspace (scratchpad)
#bind = $mainMod, S, togglespecialworkspace, magic
#bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scroll through existing workspaces with mainMod + scroll
     bind = $mainMod, mouse_down, workspace, e+1
     bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
     bindm = $mainMod, mouse:272, movewindow
     bindm = $mainMod, mouse:273, resizewindow


##############################
### WINDOWS AND WORKSPACES ###
##############################
windowrule {
  name = windowrule-2
  float = on
  match:title = ^(Save File)$  #save file context menu (float)
}

windowrule {
  name = windowrule-3
  size = 800 480
  match:title = ^(Save File)$  #save file context menu (size)
}

windowrule {
  name = windowrule-4
  opaque = on
  match:title = ^(Save File)$  #save file context menu (opaque)
}

#windowrulev2 = float, pin, title:^(Picture-in-Picture)$  #PIP for firefox/forks (float)
windowrule {
  name = windowrule-5
  pin = on
  match:title = ^(Picture-in-Picture)$  #PIP for firefox/forks (float)
}



windowrule {
  name = windowrule-6
  float = on
  match:class = (clipse)  #clipse (float)
}

windowrule {
  name = windowrule-7
  size = 622 652
  match:class = (clipse)  #clipse (size)
}


windowrule {
  name = windowrule-8
  float = on
  size = 500 650
  match:class = ^(org.gnome.Calculator)$
}

windowrule {
  name = windowrule-9
  size = 1280 720
  float = on
  match:class = ^(rquickshare)$
}

windowrule {
  name = windowrule-10
  float = on
  match:title = ^(Picture in picture)$  #PIP (float)
}

windowrule {
  name = windowrule-11
  float = on
  match:class = ^(xfce-polkit)$  #authentication popups (float)
}

windowrule {
  name = windowrule-12
  float = on
  match:class = ^(xdg-desktop-portal-gtk)$
}

windowrule {
  name = windowrule-13
  float = on
  match:class = ^(qt5ct)$
}

windowrule {
  name = windowrule-14
  float = on
  match:class = ^(org.pulseaudio.pavucontrol)$
}

windowrule {
  name = windowrule-15
  float = on
  match:class = ^(blueman-manager)$
}


windowrule {
  name = windowrule-16
  opacity = 0.9
  match:class = ^(org.pwmt.zathura)$
}


windowrule {
  name = windowrule-17
  workspace = 11 silent
  match:title = ^(Steam)$  #PIP (float)
}

windowrule {
  name = windowrule-18
  workspace = 11 silent
  match:class = ^(steam)$  #PIP (float)
}

windowrule {
  name = windowrule-19
  workspace = 11 silent
  match:title = ^(Sign in to Steam)$  #PIP (float)
}

windowrule {
  name = windowrule-20
  workspace = 11 silent
  match:class = ^(looking-glass-client)$  #PIP (float)
}

windowrule {
  name = windowrule-21
  workspace = 4 silent
  match:class = ^(gamescope)$  #PIP (float)
}

windowrule {
  name = windowrule-22
  workspace = 12 silent
  match:title = ^(vesktop)$  #PIP (float)
}

windowrule {
  name = windowrule-23
  workspace = 12 silent
  match:title = ^(Discord)$  #PIP (float)
}
